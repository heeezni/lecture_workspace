<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>둠칫둠칫 이퀄라이저 effect</title>
    <script src="../js/Rect.js"></script>
    <script>
        let width=20; // 막대 하나당 너비
        let height=300; // 막대 하나당 높이
        let count=30; // 생성하고픈 막대 수
        let colorArray=["red","orange","yellow","green","blue","purple","pink","coral","navy","skyblue"];
        let rect;
        let rectArray=[]; //rect는 막대 하나만

        // 원하는 수만큼의 막대 만들어서, 부모에 부착하되 
        // 부모의 크기는 결정된 것이 아니라, 자식의 크기와 수에 비례하여 결정하자 (동적으로 부여)
        // JavaScript언어는 함수를 일급시민(first-class citizen)취급
        // 컴퓨터 공학에서 일급시민이란 어떤 대상을 일반 데이터처럼 취급할 수 있는 것을 말함
        // 즉 자바스크립트는 함수를 변수에 담거나, 함수를 매개변수로 전달하거나, 함수를 리턴할 수도 있음
        
        let init=function(){ //★함수표현식(함수의 변수화)
            let wrapper=document.createElement("div");
            wrapper.style.width=width*count+"px";
            wrapper.style.height=height+"px";
            wrapper.style.margin="auto";
            wrapper.style.background="black";
            wrapper.style.position="relative";
            wrapper.style.transform="scaleY(-1)"; //y축 flip

            document.body.appendChild(wrapper);

        
            for (let i=0; i<count; i++){
                //10개에 대해서 모두 다른 색을 구해야 하므로 랜덤은 for문 내에서 작성
                let bg=colorArray[parseInt(Math.random()*colorArray.length)];
                rect=new Rect(wrapper,i*width,0,width,height,bg);
                rectArray.push(rect);
            }
            
            for(let i=0; i<rectArray.length; i++){
                rectArray[i].move();
            }
        }


        // let test=()=>{
        //         console.log("나 호출했어?", this); 
        //         //화살표 함수 내에서의 this는 상위스코프(영역) 객체를 가리킴
        // }

        addEventListener("load",function(){
            init();

        });
    </script>
</head>
<body>
</body>
</html>

<!-- let init=function(){...} ★함수표현식
 funtion init(){...} 함수선언문
 let init=()=>{...} ★화살표 함수
 -->
